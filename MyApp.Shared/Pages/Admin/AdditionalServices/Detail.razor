@page "/additional-services/{Id:guid}"
@layout AdminLayout
@using MyApp.Shared.Dtos.Venue
@inject IAdditionalServiceService AdditionalServiceService
@inject NavigationManager NavigationManager

<div class="min-h-screen bg-gray-50 p-6">
    <div class="mx-auto max-w-4xl">
        @if (service == null)
        {
            <div class="animate-fade-in flex items-center justify-center">
                <p class="text-lg text-gray-600">Loading...</p>
            </div>
        }
        else
        {
            <!-- Header -->
            <div class="animate-fade-in mb-6 flex items-center justify-between">
                <h1 class="text-3xl font-bold text-gray-900">Service Details</h1>
                <button @onclick="GoBack" class="rounded-md bg-[#a0522d] px-4 py-2 text-white transition-colors hover:bg-[#d2a679] focus:ring-2 focus:ring-[#d2a679] focus:outline-none">
                    Back to Services
                </button>
            </div>

            <!-- Error Message -->
            @if (!string.IsNullOrEmpty(errorMessage))
            {
                <div class="animate-fade-in mb-4 rounded-md border border-red-200 bg-red-50 p-3">
                    <p class="text-sm text-red-600">@errorMessage</p>
                </div>
            }

            <!-- Service Details -->
            <div class="animate-slide-up overflow-hidden rounded-lg bg-white shadow-md">
                <!-- General Information -->
                <div class="p-6">
                    <h2 class="mb-4 text-2xl font-semibold text-[#3e2c24]">Service Information</h2>
                    <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
                        <div>
                            <dt class="text-sm font-medium text-gray-500">Service ID</dt>
                            <dd class="mt-1 text-sm text-gray-900">@service.Id</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-500">Service Name</dt>
                            <dd class="mt-1 text-lg font-medium text-gray-900">@service.Name</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-500">Price</dt>
                            <dd class="mt-1 text-lg font-semibold text-[#a0522d]">$@service.Price.ToString("F2")</dd>
                        </div>
                        <div class="sm:col-span-2">
                            <dt class="text-sm font-medium text-gray-500">Description</dt>
                            <dd class="mt-1 text-sm text-gray-900">
                                @if (string.IsNullOrWhiteSpace(service.Description))
                                {
                                    <span class="text-gray-400 italic">No description provided</span>
                                }
                                else
                                {
                                    @service.Description
                                }
                            </dd>
                        </div>
                    </dl>
                </div>

                <!-- Venue Information -->
                <div class="border-t border-gray-200 p-6">
                    <h2 class="mb-4 text-2xl font-semibold text-[#3e2c24]">Venue Information</h2>
                    <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
                        <div>
                            <dt class="text-sm font-medium text-gray-500">Venue ID</dt>
                            <dd class="mt-1 text-sm text-gray-900">@service.VenueId</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-500">Venue Name</dt>
                            <dd class="mt-1 text-lg font-medium text-gray-900">@service.VenueName</dd>
                        </div>
                    </dl>
                </div>

                <!-- Action Buttons -->
                <div class="border-t border-gray-200 p-6">
                    <div class="flex justify-end gap-3">
                        <button @onclick="NavigateToEdit" class="rounded-md bg-[#a0522d] px-4 py-2 text-white transition-colors hover:bg-[#d2a679] focus:ring-2 focus:ring-[#d2a679] focus:outline-none">
                            Edit Service
                        </button>
                        <button @onclick="NavigateBackToList" class="rounded-md border border-gray-300 px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50 focus:ring-2 focus:ring-[#d2a679] focus:outline-none">
                            Back to List
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<style>
    .animate-fade-in {
        animation: fadeIn 0.5s ease-in;
    }

    .animate-slide-up {
        animation: slideUp 0.5s ease-out;
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @@keyframes slideUp {
        from {
            transform: translateY(20px);
            opacity: 0;
        }

        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
</style>

@code {
    [Parameter]
    public Guid Id { get; set; }

    private AdditionalServiceDto service;
    private string errorMessage = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        await LoadService();
    }

    private async Task LoadService()
    {
        try
        {
            var result = await AdditionalServiceService.GetByIdAsync(Id);
            if (result.IsSuccess)
            {
                service = result.Data;
            }
            else
            {
                errorMessage = result.Error;
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"Failed to load service details: {ex.Message}";
        }
    }

    private void GoBack()
    {
        NavigationManager.NavigateTo("/additional-services");
    }

    private void NavigateToEdit()
    {
        NavigationManager.NavigateTo($"/additional-services/{Id}/edit");
    }

    private void NavigateBackToList()
    {
        NavigationManager.NavigateTo("/additional-services");
    }
}