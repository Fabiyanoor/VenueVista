@page "/stats"
@attribute [Authorize]
@layout AdminLayout
@using MyApp.Shared.Services
@inject IFormFactor FormFactor
@inject NavigationManager Navigation

<PageTitle>Statistics</PageTitle>

<div class="min-h-screen">
 
    
        <!-- Stats Section -->
        <section class="bg-[#f2f4f3] py-8">
            <div class="mb-6 text-center">
                <h2 class="text-2xl font-bold text-[#5c3d2e]">Admin Dashboard</h2>
                <p class="text-gray-600">Welcome back</p>
            </div>

            <div class="mx-auto grid max-w-5xl grid-cols-1 gap-4 px-4 sm:grid-cols-2 md:grid-cols-4">
                <div class="rounded-lg bg-white p-4 text-center shadow">
                    <h3 class="text-2xl font-bold text-[#a0522d]">500+</h3>
                    <p class="text-gray-700">Venues Listed</p>
                </div>
                <div class="rounded-lg bg-white p-4 text-center shadow">
                    <h3 class="text-2xl font-bold text-[#a0522d]">10,000+</h3>
                    <p class="text-gray-700">Successful Bookings</p>
                </div>
                <div class="rounded-lg bg-white p-4 text-center shadow">
                    <h3 class="text-2xl font-bold text-[#a0522d]">15+</h3>
                    <p class="text-gray-700">Cities Covered</p>
                </div>
                <div class="rounded-lg bg-white p-4 text-center shadow">
                    <h3 class="text-2xl font-bold text-[#a0522d]">95%</h3>
                    <p class="text-gray-700">Customer Satisfaction</p>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="mx-auto mt-8 max-w-5xl px-4">
                <h3 class="mb-4 text-xl font-semibold text-[#5c3d2e]">Quick Actions</h3>
                <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
                    <a href="/venues/create" class="block rounded-lg bg-white p-4 text-center shadow hover:bg-gray-50">
                        <div class="mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-full bg-[#a0522d]">
                            <svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </div>
                        <span class="font-medium text-gray-700">Add New Venue</span>
                    </a>

                    <a href="/bookings" class="block rounded-lg bg-white p-4 text-center shadow hover:bg-gray-50">
                        <div class="mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-full bg-[#a0522d]">
                            <svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <span class="font-medium text-gray-700">View Bookings</span>
                    </a>

                    <a href="/venues" class="block rounded-lg bg-white p-4 text-center shadow hover:bg-gray-50">
                        <div class="mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-full bg-[#a0522d]">
                            <svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-6 0H5m2 0h4M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 8v-4m0 0H8m2 0h4m-2 4v-4m0 0h-2m2 0h2" />
                            </svg>
                        </div>
                        <span class="font-medium text-gray-700">Manage Venues</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- Recent Activity Section -->
        <section class="py-8">
            <div class="mx-auto max-w-5xl px-4">
                <h3 class="mb-4 text-xl font-semibold text-[#5c3d2e]">Recent Activity</h3>
                <div class="rounded-lg bg-white p-6 shadow">
                    <div class="space-y-4">
                        <div class="flex items-center justify-between border-b pb-3">
                            <div class="flex items-center space-x-3">
                                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-[#a0522d]">
                                    <svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                              d="M5 13l4 4L19 7" />
                                    </svg>
                                </div>
                                <span class="text-gray-700">New booking confirmed for Grand Hall</span>
                            </div>
                            <span class="text-sm text-gray-500">2 hours ago</span>
                        </div>

                        <div class="flex items-center justify-between border-b pb-3">
                            <div class="flex items-center space-x-3">
                                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-[#a0522d]">
                                    <svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                              d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                    </svg>
                                </div>
                                <span class="text-gray-700">New venue "Sky Garden" added</span>
                            </div>
                            <span class="text-sm text-gray-500">5 hours ago</span>
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-[#a0522d]">
                                    <svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <span class="text-gray-700">Booking reminder sent for 3 events</span>
                            </div>
                            <span class="text-sm text-gray-500">1 day ago</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
</div>

@code {
    // [CascadingParameter]
    // public Task<AuthenticationState> AuthStateTask { get; set; }

    // private string factor => FormFactor.GetFormFactor();
    // private string platform => FormFactor.GetPlatform();
    // private string userName = "";
    // private bool isAdmin = false;
    // private bool isLoading = true;

    // protected override async Task OnInitializedAsync()
    // {
    //     await CheckAdminAccess();
    // }

    // private async Task CheckAdminAccess()
    // {
    //     var authstate = await AuthStateTask;
    //     var user = authstate.User;

    //     userName = user.Identity?.Name ?? "Admin";

    //     Check if user has admin claim
    //     var isAdminClaim = user.FindFirst("IsAdmin")?.Value;
    //     isAdmin = isAdminClaim?.ToLower() == "true" ||
    //              user.IsInRole("Admin") ||
    //              (user.Identity?.Name?.Contains("admin", StringComparison.OrdinalIgnoreCase) == true);

    //     isLoading = false;
    // }

    private void NavigateToHome()
    {
        Navigation.NavigateTo("/");
    }
}
